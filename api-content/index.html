{"posts":[{"title":"Docker Composeå®‰è£…jenkins","content":"Docker Composeå®‰è£…jenkins ç™»å½•æœåŠ¡å™¨å¹¶åˆ›å»ºjenkinsæ‰€éœ€è¦çš„ç›®å½• mkdir jenkins cd jenkins touch docker-compose.yaml mkdir data é…ç½®æ–‡ä»¶ docker-compose.ymlé…ç½®æ–‡ä»¶ jenkins: image: jenkins/jenkins:lts volumes: - ./data/jenkins/:/var/jenkins_home - /var/run/docker.sock:/var/run/docker.sock - /usr/bin/docker:/usr/bin/docker - ./usr/lib/x86_64-linux-gnu/libltdl.so.7:/usr/lib/x86_64-linux-gnu/libltdl.so.7 ports: - &quot;2027:8080&quot; expose: - &quot;8080&quot; - &quot;50000&quot; privileged: true user: root restart: always container_name: jenkins environment: JAVA_OPTS: '-Djava.util.logging.config.file=/var/jenkins_home/log.properties' å¯åŠ¨jenkins docker-compose up -d # å¯åŠ¨ docker-compose stop # åœæ­¢ docker-compose start # å¯åŠ¨ docker-compose restart # é‡å¯ docker-compose down # åœæ­¢å®¹å™¨å¹¶ç§»é™¤ æƒé™é—®é¢˜ jenkinså¯åŠ¨æˆåŠŸåæ—¥å¿—ä¼šå‡ºç°æŠ¥é”™é‚£æ˜¯å› ä¸ºæƒé™é—®é¢˜å¯¼è‡´çš„æˆ‘ä»¬éœ€è¦ç»™dataç›®å½•æƒé™ chown -R 1000:1000 /data/jenkins è§£å†³å®Œä¹‹åæˆ‘ä»¬è®¿é—®jenkinsæœåŠ¡å™¨IP+ç«¯å£è®¿é—® è§£é”jenkinså¯†é’¥å¦‚ä¸‹å‘½ä»¤ä¼šè¾“å‡ºå¯†é’¥å¤åˆ¶åˆ°jenkinså¹¶ç‚¹å‡»ç»§ç»­å³å¯ cat /data/jenkins/secrets/initialAdminPassword å¦‚æœä¸Šé¢çš„æŸ¥çœ‹å¯†é’¥æ–¹æ³•æ²¡æ‰¾åˆ°çš„è¯å¯ä»¥è¿›å…¥å®¹å™¨å†…æŸ¥çœ‹ docker exec -it jenkins bash cat /var/jenkins_home/secrets/initialAdminPassword å¾€åå°±æ˜¯åŸºç¡€æ“ä½œäº†ä¸‹ä¸€æ­¥è¿›è¡Œæ’ä»¶å®‰è£…ç„¶åå†åˆ›å»ºç”¨æˆ·å³å¯ ","link":"https://note.uhayo.com/post/njgg20QZC/"},{"title":"Docker Composeå®‰è£…Redis","content":"Docker Composeå®‰è£…Redis ç™»å½•æœåŠ¡å™¨å¹¶åˆ›å»ºredisç›®å½•åŠredisé…ç½®æ–‡ä»¶ mkdir redis cd redis touch docker-compose.yaml touch redis.conf é…ç½®æ–‡ä»¶ docker-compose.ymlé…ç½®æ–‡ä»¶ version: &quot;3.3&quot; services: redis: image: &quot;redis:latest&quot; container_name: redis-pord restart: always ports: - &quot;6379:6379&quot; volumes: - ./redis.conf:/etc/redis/redis.conf:rw - ./data:/data:rw command: # æ‰§è¡Œçš„å‘½ä»¤ redis-server /etc/redis/redis.conf --appendonly yes redis.confé…ç½®æ–‡ä»¶ requirepass 123456 appendonly yes å¯åŠ¨Redis docker-compose up -d # å¯åŠ¨ docker-compose stop # åœæ­¢ docker-compose start # å¯åŠ¨ docker-compose restart # é‡å¯ docker-compose down # åœæ­¢å®¹å™¨å¹¶ç§»é™¤ æµ‹è¯•è¿æ¥Redis ä½¿ç”¨æœåŠ¡å™¨IPåŠ 6379åŠRediså¯†ç å³å¯è®¿é—®Redisäº† Redis Windowsç‰ˆå®¢æˆ·ç«¯ä¸‹è½½åœ°å€ https://github.com/qishibo/AnotherRedisDesktopManager/releases ","link":"https://note.uhayo.com/post/4wvNnZBoi/"},{"title":"Docker Composeå®‰è£…Tomcat","content":"Docker Composeå®‰è£…Tomcat ç™»å½•æœåŠ¡å™¨å¹¶åˆ›å»º conf docker-compose.yaml confæ˜¯ç›®å½•Tomcatçš„é…ç½®æ–‡ä»¶ç›®å½•åä¸€ä¸ªæ˜¯æ–‡ä»¶ã€‚ mkdir tomcat mkdir conf touch docker-compose.yaml cd conf touch server.xml é…ç½®æ–‡ä»¶ docker-compose.yamlé…ç½®æ–‡ä»¶ version: &quot;3&quot; services: tomcat: image: &quot;daocloud.io/library/tomcat:8.5.15-jre8&quot; restart: always container_name: tomcat ports: - 8080:8080 volumes: - ./conf/server.xml:/usr/local/tomcat/conf/server.xml - ./logs:/usr/local/tomcat/logs #- ./webapps://usr/local/tomcat/webapps/ # å‘å¸ƒwaråŒ…æ—¶æŠŠæ³¨é‡Šåˆ æ‰å¹¶åœ¨tomcatè·Ÿç›®å½•ä¸‹åˆ›å»ºwebappsç›®å½•ç”¨äºä¸Šä¼ waråŒ… - /etc/localtime:/etc/localtime:ro è§£é‡Š: ç«¯å£æ˜ å°„å‰é¢çš„ç«¯å£æ˜¯å®¿ä¸»æœºçš„ç«¯å£åé¢æ˜¯å®¹å™¨çš„ç«¯å£å¦‚è¦æ”¹tomcatç«¯å£åªéœ€è¦æ”¹å‰é¢çš„å®¿ä¸»æœºç«¯å£å³å¯ä¸ç”¨æ”¹å®¹å™¨çš„ï¼ˆæ”¹å®¹å™¨çš„ç«¯å£éœ€è¦åŒæ­¥æŠŠserve.xmlå†…çš„ç«¯å£ä¹Ÿæ”¹äº†ï¼‰ ports: - 8080:8080 ä¸‹é¢çš„ç›®å½•åˆ†åˆ«æ˜¯tomcaté…ç½®æ–‡ä»¶ç›®å½•webappsé¡¹ç›®å‘å¸ƒç›®å½•logsæ—¥å¿—ç›®å½• conf webapps logs å¯åŠ¨Tomcat docker-compose up -d # å¯åŠ¨ docker-compose stop # åœæ­¢ docker-compose start # å¯åŠ¨ docker-compose restart # é‡å¯ docker-compose down # åœæ­¢å®¹å™¨å¹¶ç§»é™¤ ","link":"https://note.uhayo.com/post/JLSTaagax/"},{"title":"Docker Composeå®‰è£…Nginx","content":"Docker Composeå®‰è£…Nginx ä¸ºä»€ä¹ˆè¦ä½¿ç”¨Docker Composeå®‰è£…Nginxï¼Œå› ä¸ºDockeræ–¹ä¾¿ç®¡ç†åŠé…ç½®ç¯å¢ƒç­‰åªéœ€è¦ä¸€æ¬¡å³å¯å‘å¸ƒå¤šä¸ªç¯å¢ƒä¾‹å¦‚ï¼šå¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒç­‰ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ç™»å½•æœåŠ¡å™¨å¹¶åˆ›å»ºdocker-compose.ymlåŠç›®å½•ï¼š æœ¬ Nginx éƒ¨ç½²çš„æ˜¯å¸¦ HTTPS çš„éœ€è¦åˆ›å»º cert è¯ä¹¦ç›®å½•åœ¨ root ç›®å½•ä¸‹åˆ›å»ºå³å¯(å½“ç„¶ä¸ä¸€å®šè¦åœ¨rootç›®å½•ä¸‹åˆ›å»ºå¯ä»¥åœ¨å…¶ä»–è·¯å¾„åˆ›å»ºåé¢å†docker-compose.ymlæ–‡ä»¶å†…æŒ‡å®šå³å¯) è¿™é‡Œé»˜è®¤ç™»å½•çš„æ˜¯rootç”¨æˆ·åˆ™ç›´æ¥åœ¨rootç”¨æˆ·çš„å®¶ç›®å½•ä¸‹åˆ›å»ºè¯ä¹¦ç›®å½• mkdir cert # ç”¨äºå­˜æ”¾åŸŸåè¯ä¹¦ åˆ›å»ºç«™ç‚¹ç›®å½•åŒæ ·åœ¨rootç”¨æˆ·å®¶ç›®å½•ä¹Ÿå¯ä»¥åœ¨å…¶ä»–åœ°æ–¹åˆ›å»ºåé¢æ”¹docker-compose.ymlæ–‡ä»¶å†…çš„è·¯å¾„å³å¯ï¼ˆwebä¸‹é¢ç›®å½•ï¼‰ mkdir www ä¸‹é¢åˆ›å»ºNginxç›®å½• mkdir nginx cd nginx mkdir conf.d touch docker-compose.yaml # docker-composeæ–‡ä»¶ touch nginx.conf # Nginxå…¨å±€é…ç½®æ–‡ä»¶ cd conf.d # ç«™ç‚¹é…ç½®ç›®å½• touch default.conf # è¿™ä¸ªæ–‡ä»¶æ˜¯ç«™ç‚¹é…ç½®æ–‡ä»¶åŠä¸€ä¸ªç«™ç‚¹ ç›®å½•æˆªå›¾ ç¼–å†™é…ç½®æ–‡ä»¶ docker-compose.ymlé…ç½®æ–‡ä»¶ vim docker-compose.yaml version: &quot;3&quot; services: nginx: image: nginx ports: - 80:80 - 443:443 volumes: - ~/cert:/home/cert # HTTPSè¯ä¹¦ç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„homeç›®å½•ä¸‹ - ~/www:/home/www # æŒ‚è½½å®¿ä¸»æœºä¸Šçš„wwwç›®å½•åˆ°å®¹å™¨é‡Œçš„homeç›®å½•ä¸‹æ–¹ä¾¿å‘å¸ƒwebé¡¹ç›® - ./nginx.conf:/etc/nginx/nginx.conf - ./conf.d/:/etc/nginx/conf.d/ - ./logs:/var/log/nginx # æŠŠå®¹å™¨å†…çš„Nginxæ—¥å¿—ç›®å½•æŒ‚è½½åˆ°å®¿ä¸»æœº #- ~/download:/home/download - /etc/localtime:/etc/localtime:ro #é…ç½®å®¹å™¨æ—¶é—´åŒæ­¥ restart: always container_name: nginx nginx.confé…ç½®æ–‡ä»¶ vim nginx.conf user nginx; worker_processes 2; error_log /var/log/nginx/error.log warn; pid /var/run/nginx.pid; events { worker_connections 1024; } http { include /etc/nginx/mime.types; default_type application/octet-stream; log_format main '$remote_addr - $remote_user [$time_local] &quot;$request&quot; ' '$status $body_bytes_sent &quot;$http_referer&quot; ' '&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;'; access_log /var/log/nginx/access.log main; sendfile on; #tcp_nopush on; keepalive_timeout 65; # å¼€å¯å’Œå…³é—­gzipæ¨¡å¼ gzip on; # gizpå‹ç¼©èµ·ç‚¹ï¼Œæ–‡ä»¶å¤§äº1kæ‰è¿›è¡Œå‹ç¼© gzip_min_length 1k; # gzip å‹ç¼©çº§åˆ«ï¼Œ1-9ï¼Œæ•°å­—è¶Šå¤§å‹ç¼©çš„è¶Šå¥½ï¼Œä¹Ÿè¶Šå ç”¨CPUæ—¶é—´ gzip_comp_level 9; # è¿›è¡Œå‹ç¼©çš„æ–‡ä»¶ç±»å‹ã€‚ gzip_types text/plain application/javascript application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png; # nginxå¯¹äºé™æ€æ–‡ä»¶çš„å¤„ç†æ¨¡å—ï¼Œå¼€å¯åä¼šå¯»æ‰¾ä»¥.gzç»“å°¾çš„æ–‡ä»¶ï¼Œç›´æ¥è¿”å›ï¼Œä¸ä¼šå ç”¨cpuè¿›è¡Œå‹ç¼©ï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™ä¸è¿›è¡Œå‹ç¼© gzip_static on; # æ˜¯å¦åœ¨http headerä¸­æ·»åŠ Vary: Accept-Encodingï¼Œå»ºè®®å¼€å¯ gzip_vary on; # è®¾ç½®å‹ç¼©æ‰€éœ€è¦çš„ç¼“å†²åŒºå¤§å°ï¼Œä»¥4kä¸ºå•ä½ï¼Œå¦‚æœæ–‡ä»¶ä¸º7kåˆ™ç”³è¯·2*4kçš„ç¼“å†²åŒº gzip_buffers 2 4k; # è®¾ç½®gzipå‹ç¼©é’ˆå¯¹çš„HTTPåè®®ç‰ˆæœ¬ gzip_http_version 1.1; # ç¦ç”¨IE 6 gzip gzip_disable &quot;MSIE [1-6]\\.&quot;; include /etc/nginx/conf.d/*.conf; # è·¨åŸŸé…ç½® #add_header Access-Control-Allow-Origin *; #add_header Access-Control-Allow-Headers X-Requested-With; #add_header Access-Control-Allow-Methods GET,POST,OPTIONS; #server { # é…ç½®IPè·Ÿæœªåœ¨conf.dç›®å½•ä¸‹é…ç½®è¿‡ç«™ç‚¹çš„åŸŸåè®¿é—®ç›´æ¥è¿”å›403 #listen 80 default_server; #listen 443 ssl default_server; #server_name _; #ssl_certificate /home/cert/nikouer.com/nikouer.com.pem; #ssl_certificate_key /home/cert/nikouer.com/nikouer.com.key; #ssl_session_cache shared:SSL:1m; #ssl_session_timeout 5m; #ssl_ciphers HIGH:!aNULL:!MD5; #ssl_prefer_server_ciphers on; #return 403; #} } default.confé…ç½®æ–‡ä»¶ vim conf.d/default.conf server { listen 80; server_name mqtian.com www.mqtian.com; # é…ç½®è®¿é—®çš„åŸŸåï¼ˆç«™ç‚¹åŸŸåï¼‰ rewrite ^(.*) https://$server_name$1 permanent; # HTTP--&gt;HTTPS å³è®¿é—®80ç«¯å£æ—¶è‡ªåŠ¨è·³è½¬443ç«¯å£ } server { listen 443 ssl; server_name mqtian.com www.mqtian.com; charset utf-8; access_log /var/log/nginx/mqtian.com.log; # è‡ªå®šä¹‰æ—¥å¿—è¾“å‡º ssl_certificate /home/cert/mqtian.com/mqtian.com.pem; # SSLè¯ä¹¦è·¯å¾„ ssl_certificate_key /home/cert/mqtian.com/mqtian.com.key; # SSLè¯ä¹¦è·¯å¾„ ssl_session_cache shared:SSL:1m; ssl_session_timeout 5m; ssl_ciphers HIGH:!aNULL:!MD5; ssl_prefer_server_ciphers on; location / { #proxy_pass http://10.0.4.14:8662; # åç«¯åœ°å€ #client_max_body_size 10M; #add_header Content-Security-Policy upgrade-insecure-requests; # ç»™ç«™ç‚¹httpæ¥æºå¼ºåˆ¶æ”¹å˜ä¸ºhttpsæ¥æº #proxy_set_header Host $http_host; # HoståŒ…å«å®¢æˆ·ç«¯çœŸå®çš„åŸŸåå’Œç«¯å£å· #proxy_set_header X-Real-IP $remote_addr; # X-Forwarded-Protoè¡¨ç¤ºå®¢æˆ·ç«¯çœŸå®çš„åè®®ï¼ˆhttpè¿˜æ˜¯httpsï¼‰ #proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; # X-Real-IPè¡¨ç¤ºå®¢æˆ·ç«¯çœŸå®çš„IP #proxy_set_header X-Forwarded-Proto $scheme; root /usr/share/nginx/html; # å‘å¸ƒwebé¡¹ç›®çš„ç›®å½• index index.html index.html; } error_page 500 502 503 504 /50x.html; location = /50x.html { root /usr/share/nginx/html; } } å¯åŠ¨Nginx docker-compose up -d # å¯åŠ¨ docker-compose stop # åœæ­¢ docker-compose start # å¯åŠ¨ docker-compose restart # é‡å¯ docker-compose down # åœæ­¢å®¹å™¨å¹¶ç§»é™¤ æ¥ä¸‹æ¥å°±è®¿é—®è¯•è¯•æŠŠ è®¿é—®åˆšåˆšéƒ¨ç½²çš„åŸŸåç«™ç‚¹ https://mqtian.com ","link":"https://note.uhayo.com/post/x407Ei7Gs/"},{"title":"Linuxç³»ç»Ÿå®‰è£…Docker ComposeåŠä½¿ç”¨","content":"Docker Compose ç®€ä»‹ Docker Compose æ˜¯ä¸€ç§ç”¨äºé€šè¿‡ä½¿ç”¨å•ä¸ªå‘½ä»¤åˆ›å»ºå’Œå¯åŠ¨ Docker åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥é…ç½®åº”ç”¨ç¨‹åºçš„æœåŠ¡ã€‚ å®ƒæ˜¯å¼€å‘ï¼Œæµ‹è¯•å’Œå‡çº§ç¯å¢ƒçš„åˆ©å™¨ã€‚ å®ƒæä¾›ä»¥ä¸‹å‘½ä»¤æ¥ç®¡ç†åº”ç”¨ç¨‹åºçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼š å¯åŠ¨ï¼Œåœæ­¢å’Œé‡å»ºæœåŠ¡ æŸ¥çœ‹è¿è¡ŒæœåŠ¡çš„çŠ¶æ€ æµå¼è¿è¡ŒæœåŠ¡çš„æ—¥å¿—è¾“å‡º åœ¨æœåŠ¡ä¸Šè¿è¡Œä¸€æ¬¡æ€§å‘½ä»¤ è¦å®ç° docker composeï¼Œéœ€è¦åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š å°†åº”ç”¨ç¨‹åºç¯å¢ƒå˜é‡æ”¾åœ¨ Docker æ–‡ä»¶ä¸­ä»¥å…¬å¼€è®¿é—®ã€‚ åœ¨ docker-compose.yml æ–‡ä»¶ä¸­æä¾›å’Œé…ç½®æœåŠ¡åç§°ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥åœ¨éš”ç¦»çš„ç¯å¢ƒä¸­ä¸€èµ·è¿è¡Œã€‚ è¿è¡Œ docker-compose å°†å¯åŠ¨å¹¶è¿è¡Œæ•´ä¸ªåº”ç”¨ç¨‹åºã€‚ Docker Compose å®‰è£… ä»¥ä¸‹æ˜¯åœ¨ Ubuntu ç³»ç»Ÿä¸­å®‰è£… Docker Compose çš„(å…·ä½“å„ç‰ˆæœ¬linuxå¯ä»¥æ‰‹åŠ¨å»Githubä¸‹è½½ç„¶åä¸Šä¼ æœåŠ¡å™¨å³å¯)ï¼š curl -L https://github.com/docker/compose/releases/download/1.21.2/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose ä»¥ä¸‹æ˜¯ä¸‹è½½è¿›åº¦ï¼š å¦‚æœä¸‹è½½æ—¶é—´è¿‡é•¿æˆ–è€…ä¸‹è½½å¤±è´¥å¯ä»¥æ‰‹åŠ¨å»Githubä¸‹è½½ https://github.com/docker/compose/releasesæœ€æ–°ç‰ˆå³å¯ä¸‹è½½å®Œä¹‹åä¸Šä¼ æœåŠ¡å™¨ /usr/local/bin/ç›®å½•ä¸‹å¹¶ç»™äºˆæ‰§è¡Œæƒé™ chmod +x /usr/local/bin/docker-compose ç»™ä½ ä¸Šä¼ çš„docker-composeæ–‡ä»¶æ‰§è¡Œæƒé™ å¦‚ä¸‹å›¾ éªŒè¯Docker Composeç‰ˆæœ¬ docker-compose version ä½¿ç”¨Docker composeéƒ¨ç½²ä¸€ä¸ªTomcat åˆ›å»ºä¸€ä¸ªåä¸ºTomcatçš„ç›®å½•å¹¶åœ¨ä¸‹æ–°å»ºdocker-compose.ymlæ–‡ä»¶ mkdir tomcat cd tomcat touch docker-compose.yaml vim docker-compose.yaml docker-compose.yamlå†…å®¹ï¼š version: '3' services: tomcat: restart: always image: tomcat container_name: tomcat ports: - 8000:8000 å‚æ•°è¯´æ˜ï¼š versionï¼šæŒ‡å®šè„šæœ¬è¯­æ³•è§£é‡Šå™¨ç‰ˆæœ¬ servicesï¼šè¦å¯åŠ¨çš„æœåŠ¡åˆ—è¡¨ webappï¼šæœåŠ¡åç§°ï¼Œå¯ä»¥éšä¾¿èµ·åï¼Œä¸é‡å¤å³å¯ restartï¼šå¯åŠ¨æ–¹å¼ï¼Œè¿™é‡Œçš„ always è¡¨ç¤ºæ€»æ˜¯å¯åŠ¨ï¼Œå³ä½¿æœåŠ¡å™¨é‡å¯äº†ä¹Ÿä¼šç«‹å³å¯åŠ¨æœåŠ¡ imageï¼šé•œåƒçš„åç§°ï¼Œé»˜è®¤ä» Docker Hub ä¸‹è½½ container_nameï¼šå®¹å™¨åç§°ï¼Œå¯ä»¥éšä¾¿èµ·åï¼Œä¸é‡å¤å³å¯ portsï¼šç«¯å£æ˜ å°„åˆ—åˆ—è¡¨ï¼Œå·¦è¾¹ä¸ºå®¿ä¸»æœºç«¯å£ï¼Œå³è¾¹ä¸ºå®¹å™¨ç«¯å£ Docker Composeå¸¸ç”¨å‘½ä»¤ å‘½ä»¤ è§£é‡Š docker-compose pull æ‹‰å–docker-compose.ymlæ–‡ä»¶å†…ç¼–æ’çš„æœåŠ¡é•œåƒï¼ˆè‡ªå®šä¹‰çš„é•œåƒé™¤å¤–å› ä¸ºDockeræ³¨å†Œè¡¨ä¸Šæ²¡ä½ è‡ªå®šä¹‰çš„é•œåƒï¼‰ docker-compose up å‰å°è¿è¡Œ å¦‚æœä¸­æ–­ç»ˆç«¯æ—¶ä½ çš„æœåŠ¡å°±ä¼šåœæ­¢è¿è¡Œäº† docker-compose up -d åå°å¯åŠ¨ docker-compose stop åœæ­¢ docker-compose start å¯åŠ¨ docker-compose restart é‡å¯ docker-compose ps æŸ¥çœ‹docker-compose.ymlå†…ç¼–æ’çš„æœåŠ¡æ˜¯å¦åœ¨è¿è¡Œä¸docker psç›¸åŒ docker-compose down åœæ­¢å¹¶ç§»é™¤å®¹å™¨ è®¿é—®åˆšåˆšéƒ¨ç½²çš„Tomcat ä½¿ç”¨æœåŠ¡å™¨IP+8080ç«¯å£å°±å¯ä»¥è®¿é—®ä½ éƒ¨ç½²çš„Tomcatäº† ","link":"https://note.uhayo.com/post/kjPm5W4ox/"},{"title":"Centos7å®‰è£…Docker","content":"Dockerç®€ä»‹ Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„Linuxæœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ï¼Œå®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚ Docker ä½¿ç”¨å®¢æˆ·ç«¯-æœåŠ¡å™¨ (C/S) æ¶æ„æ¨¡å¼ ä½¿ç”¨è¿œç¨‹APIæ¥ç®¡ç†å’Œåˆ›å»ºDockerå®¹å™¨ã€‚Docker å®¹å™¨ï¼ˆContainerï¼‰é€šè¿‡ Docker é•œåƒï¼ˆImageï¼‰æ¥åˆ›å»ºï¼ŒäºŒè€…ä¹‹é—´çš„å…³ç³»ç±»ä¼¼äºé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„å¯¹è±¡ä¸ç±» é‚£Dockerç”±ä»€ä¹ˆç»„æˆå‘¢ï¼Œ åŒ…æ‹¬ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µ: ä»“åº“ï¼ˆRepositoryï¼‰ é•œåƒï¼ˆImageï¼‰ å®¹å™¨(Containerï¼‰ å…¶ä¸­Registryæ˜¯Dockerç”¨äºå­˜æ”¾é•œåƒæ–‡ä»¶çš„ä»“åº“ï¼ŒDocker ä»“åº“çš„æ¦‚å¿µè·ŸGit ç±»ä¼¼ï¼ˆå°±åƒå•†åº—å­˜æ”¾æ‰€æœ‰çš„è‹±é›„ï¼Œåªæ˜¯æ›´æ”¹è‹±é›„çš„æƒé™åœ¨æŸäº›éç¨‹åºå‘˜æ‰‹é‡Œï¼‰ã€‚ æ‰€è°“é•œåƒå°±æ˜¯æ„å»ºå®¹å™¨çš„æºä»£ç ï¼Œæ˜¯ä¸€ä¸ªåªè¯»çš„æ¨¡æ¿ï¼Œç”±ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç³»ç»Ÿç»„æˆçš„ï¼Œç±»ä¼¼äºè™šæ‹Ÿæœºçš„é•œåƒï¼ˆè‹±é›„ä¹Ÿæ˜¯åªè¯»çš„ï¼Œæœ‰è‡ªå·±çš„æŠ€èƒ½è¢«åŠ¨ï¼Œä½ ä¹Ÿä¸èƒ½è¿›è¡Œæ“ä½œï¼‰ã€‚ é‚£ä¹ˆå®¹å™¨å°±æ˜¯ç”±Dockeré•œåƒåˆ›å»ºçš„è¿è¡Œå®ä¾‹ï¼Œç±»ä¼¼äºè™šæ‹Ÿæœºï¼Œå®¹å™¨ä¹‹é—´æ˜¯ç›¸äº’éš”ç¦»çš„ï¼ŒåŒ…å«ç‰¹å®šçš„åº”ç”¨åŠå…¶æ‰€éœ€çš„ä¾èµ–æ–‡ä»¶ï¼ˆå¥½æ¯”æ¯ä¸ªè‹±é›„éƒ½æ˜¯éš”ç¦»çš„ï¼Œéƒ½æœ‰è‡ªå·±çš„çš®è‚¤ï¼ŒæŠ€èƒ½ä»¥åŠèµ°çš„è·¯çº¿)ã€‚ æ³¨ï¼šDocker Hubæ˜¯Dockerå…¬å¸æä¾›çš„ä¸€ä¸ªæ³¨å†ŒæœåŠ¡å™¨ï¼ˆRegisterï¼‰æ¥ä¿å­˜å¤šä¸ªä»“åº“ï¼Œæ¯ä¸ªä»“åº“åˆå¯ä»¥åŒ…å«å¤šä¸ªå…·å¤‡ä¸åŒtagçš„é•œåƒã€‚ å®‰è£…Docker Centos7ï¼Œlinux 3.10 å†…æ ¸ï¼Œdockerå®˜æ–¹è¯´è‡³å°‘3.8ä»¥ä¸Šï¼Œå»ºè®®3.10ä»¥ä¸Šï¼ˆubuntuä¸‹è¦linuxå†…æ ¸3.8ä»¥ä¸Šï¼Œ RHEL/Centos çš„å†…æ ¸ä¿®è¡¥è¿‡ï¼Œ centos6.5çš„ç‰ˆæœ¬å°±å¯ä»¥â€”â€”è¿™ä¸ªå¯ä»¥è¯•è¯•ï¼‰ rootè´¦æˆ·ç™»å½•ï¼ŒæŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬å¦‚ä¸‹ uname -a æŠŠyumåŒ…æ›´æ–°åˆ°æœ€æ–° yum update # æœŸé—´è¦é€‰æ‹©ç¡®è®¤ï¼Œè¾“å…¥ y å³å¯ å®‰è£…éœ€è¦çš„è½¯ä»¶åŒ…ï¼Œ yum-util æä¾›yum-config-manageråŠŸèƒ½ï¼Œå¦å¤–ä¸¤ä¸ªæ˜¯devicemapperé©±åŠ¨ä¾èµ–çš„ yum install -y yum-utils device-mapper-persistent-data lvm2 è®¾ç½®yumæºï¼ˆé€‰æ‹©å…¶ä¸­ä¸€ä¸ªï¼‰ yum-config-manager --add-repo http://download.docker.com/linux/centos/docker-ce.repoï¼ˆä¸­å¤®ä»“åº“ï¼‰# Dockerå®˜æ–¹çš„ yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repoï¼ˆé˜¿é‡Œä»“åº“ï¼‰# é˜¿é‡Œäº‘çš„é€Ÿåº¦åœ¨å›½å†…é€Ÿåº¦å¿« yum-config-manager --add-repo # è®¾ç½®å®Œyumæºåæ‰§è¡Œ å¯ä»¥æŸ¥çœ‹æ‰€æœ‰ä»“åº“ä¸­æ‰€æœ‰dockerç‰ˆæœ¬ï¼Œå¹¶é€‰æ‹©ç‰¹å®šç‰ˆæœ¬å®‰è£… yum list docker-ce --showduplicates | sort -r å®‰è£…Dockerï¼Œå‘½ä»¤ï¼šyum install docker-ce yum install -y docker-ce #æˆ–è€… yum install -y docker-ce-18.03.1.ce # å®‰è£…æŒ‡å®šç‰ˆæœ¬ å¯åŠ¨Docker systemctl start docker # å¯åŠ¨Docker systemctl enable docker # è®¾ç½®å¼€æœºå¯åŠ¨ æŸ¥çœ‹ç‰ˆæœ¬ docker version # æ‰§è¡Œåè¾“å‡ºDockerç‰ˆæœ¬ä¿¡æ¯ Dockerå¸¸ç”¨å‘½ä»¤ å‘½ä»¤ è§£é‡Š docker pull nginx:latest æ‹‰å–nginxé•œåƒä¹Ÿå¯ä»¥æ¢æˆè¦æ‹‰å–çš„å…¶ä»–é•œåƒ docker images æŸ¥çœ‹æ‹‰å–å¥½çš„æ‰€æœ‰é•œåƒ docker run -d nginx -p 80:80 --name nginx nginx:latest è¿è¡ŒNginx -p 80:80 æ˜ å°„å®¹å™¨80ç«¯å£åˆ°å®¿ä¸»æœº80ç«¯å£ --name nginx æ˜¯ç»™è¯¥å®¹å™¨èµ·ä¸€ä¸ªåˆ«åï¼Œæœ€åæ˜¯è¿è¡Œçš„é•œåƒ Nginx docker run -d nginx -p 80:80 -v /www:/www --name nginx nginx:latest -v /www:/www æ˜¯æŒ‚è½½å®¿ä¸»æœº /www ç›®å½•åˆ°å®¹å™¨é‡Œä½œç”¨æ˜¯å‘å¸ƒwebé¡¹ç›® docker run -d nginx -p 80:80 -v /www:/www -e --name nginx nginx:latest -e å¯ä»¥ä¼ é€’ä½ åœ¨Dockerfileæ–‡ä»¶é‡Œé…ç½®çš„å˜é‡, ä¼ é€’ç¯å¢ƒå˜é‡ é€‚ç”¨äºè‡ªå®šä¹‰çš„é•œåƒ docker stop nginx åœæ­¢è¿è¡Œåˆ«åä¸º nginx çš„å®¹å™¨ docker start nginx å¯åŠ¨åˆ«åä¸º nginx çš„å®¹å™¨ docker restart nginx é‡æ–°å¯åŠ¨åˆ«åä¸º nginx çš„å®¹å™¨ docker ps æŸ¥çœ‹å·²åœæ­¢è¿è¡Œçš„å®¹å™¨ docker ps -a -a æ˜¾ç¤ºæ‰€æœ‰çš„å®¹å™¨ï¼ŒåŒ…æ‹¬æœªè¿è¡Œçš„ docker ps -f -f æ ¹æ®æ¡ä»¶è¿‡æ»¤æ˜¾ç¤ºçš„å†…å®¹ docker --format --format æŒ‡å®šè¿”å›å€¼çš„æ¨¡æ¿æ–‡ä»¶ docker ps -l -l æ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„å®¹å™¨ docker ps -1 -q é™é»˜æ¨¡å¼ï¼Œåªæ˜¾ç¤ºå®¹å™¨ç¼–å· docker ps -s -s æ˜¾ç¤ºæ€»çš„æ–‡ä»¶å¤§å° docker rm nginx åˆ é™¤å·²åœæ­¢è¿è¡Œçš„nginx docker rmi nginx åˆ é™¤nginxé•œåƒ docker run -d --name selenium_hub selenium/hub docker run -d --name node --link selenium_hub:hub selenium/node-chrome-debug åˆ›å»ºå¹¶å¯åŠ¨åä¸ºnodeçš„å®¹å™¨ï¼Œå¹¶æŠŠè¯¥å®¹å™¨å’Œåä¸ºselenium_hubçš„å®¹å™¨é“¾æ¥èµ·æ¥ã€‚ ","link":"https://note.uhayo.com/post/B10wKysO4/"},{"title":"Dockeréƒ¨ç½²MySQL5.7","content":"Dockeréƒ¨ç½²MySQL5.7 æ–°å»ºä¸€ä¸ªç›®å½•ç”¨äºå­˜æ”¾docker-compose.ymlæ–‡ä»¶ mkdir mysql cd mysql touch docker-compose.yml docker-compose.ymlæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š version: '3.3' services: mysql: hostname: mysql # å¯åŠ¨å®¹å™¨åç§°mysql container_name: mysql # ä½¿ç”¨mysql 5.7.20çš„é•œåƒ image: mysql:5.7.28 # è‡ªå¯åŠ¨ restart: always command: # mysqlé»˜è®¤ä½¿ç”¨utf8mb4ç¼–ç  - --character-set-server=utf8mb4 - --collation-server=utf8mb4_general_ci # mysqlæ—¶é—´åŠ 8ä¸ªå°æ—¶ - --default-time_zone=+8:00 environment: # æœåŠ¡å™¨æ—¶åŒºä½¿ç”¨ä¸Šæµ· TZ: Asis/Shanghai # mysqlåˆå§‹åŒ–å¯†ç  MYSQL_ROOT_PASSWORD: 1111 ports: # å®¹å™¨3306ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœº3306ç«¯å£ - &quot;1120:3306&quot; volumes: # mysqlç›¸å…³æ•°æ®å­˜å‚¨åœ¨å®¿ä¸»æœº/data/docker/mysqlæ–‡ä»¶å¤¹ - &quot;./data/:/var/lib/mysql&quot; æ‹‰å–MySQL5.7.28é•œåƒ docker pull mysql:5.7.28 å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥è¿è¡Œdocker-compose up -dä»–ä¼šåœ¨è¿è¡Œæ—¶æ‹‰é•œåƒ è¿è¡ŒMySQL docker-compose up -d # åå°è¿è¡Œ docker-compose down # åœæ­¢è¿è¡Œ docker-compose restart # é‡æ–°å¯åŠ¨ docker-compose stop # åœæ­¢è¿è¡Œï¼ˆä¸ä¼šåˆ é™¤è¿è¡Œè®°å½•ï¼‰ docker-compose start # æ¢å¤è¿è¡Œ ä½¿ç”¨MySQLå®¢æˆ·ç«¯è¿æ¥MySQL è¿™é‡Œä½¿ç”¨sqlyogè¿æ¥ è‡³æ­¤MySQLå·²ç»éƒ¨ç½²å®Œæ¯• ","link":"https://note.uhayo.com/post/2-qt8P0g6/"},{"title":"Hello world","content":"ğŸ‘ æ¬¢è¿ä½¿ç”¨ Gridea ï¼ âœï¸ Gridea ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ... Github Gridea ä¸»é¡µ ç¤ºä¾‹ç½‘ç«™ ç‰¹æ€§ğŸ‘‡ ğŸ“ ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ Markdown è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ ğŸŒ‰ ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡ ğŸ·ï¸ ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„ ğŸ“‹ ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå• ğŸ’» ä½ å¯ä»¥åœ¨ Windowsï¼ŒMacOS æˆ– Linux è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯ ğŸŒ ä½ å¯ä»¥ä½¿ç”¨ ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ æˆ– Coding Pages å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å° ğŸ’¬ ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ Gitalk æˆ– DisqusJS è¯„è®ºç³»ç»Ÿ ğŸ‡¬ğŸ‡§ ä½ å¯ä»¥ä½¿ç”¨ä¸­æ–‡ç®€ä½“æˆ–è‹±è¯­ ğŸŒ ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ› ğŸ–¥ ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥ ğŸŒ± å½“ç„¶ Gridea è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´ å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼ ğŸ˜˜ Enjoy~ ","link":"https://note.uhayo.com/post/hello-world/"}]}